<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python is a good visual primitive</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 项目链接按钮样式 */
        :root {
            --primary-color-dark: #1d75a5;
        }
        
        .project-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 24px;
            justify-content: center;
        }
        
        .project-link {
            display: inline-flex;
            align-items: center;
            padding: 10px 18px;
            border-radius: 4px;
            font-size: 15px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .project-link i {
            margin-right: 8px;
        }
        
        .project-link.github {
            background-color: #323232;
            color: white;
        }
        
        .project-link.github:hover {
            background-color: #404040;
        }
        
        .project-link.huggingface {
            background-color: #ee9a1b;
            color: #ffffff;
        }
        
        .project-link.huggingface:hover {
            background-color: #d98c19;
        }
        
        .project-link.arxiv {
            background-color: #b31b1b;
            color: white;
        }
        
        .project-link.arxiv:hover {
            background-color: #9a1717;
        }
        
        /* 页脚样式 */
        footer {
            border-top: 1px solid #eaeaea;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        .footer-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .copyright p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }
        
        .footer-social {
            display: flex;
            gap: 16px;
        }
        
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            color: #666;
            transition: color 0.2s, transform 0.2s;
            font-size: 16px;
        }
        
        .social-icon:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        /* CTA按钮样式 */
        .cta-button {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 4px;
            font-weight: 500;
            text-decoration: none;
            transition: background-color 0.2s;
            margin-top: 8px;
        }
        
        .cta-button:hover {
            background-color: var(--primary-color-dark);
            color: white;
        }
        
        .cta-button span {
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <div class="site-wrapper">
        <!-- Left sidebar navigation -->
        <aside class="sidebar-nav">
            <div class="logo">
                <a href="index.html">
                    <svg width="32" height="32" viewBox="0 0 188.09 78.7" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0,45.67v-12.65L50.59,0v16.56L14.9,39.09v.53l35.69,22.53v16.56L0,45.67Z" fill="#b3b3b3"/>
                        <path d="M83.68,37.22L68,0h19.78l5.69,15.69c1.16,3.2,2.68,8.7,4.06,12.95h.53c2.77-4.17,6.15-10.07,8.18-12.92L117.88,0h19.62l-32,39.88,16.96,38.82h-19.65l-6.53-17.04c-1.09-2.86-2.85-8.34-4.17-12.21h-.53c-2.82,4.29-6.01,9.18-8.4,12.42l-12.87,16.83h-19.72l33.09-41.48Z" fill="currentColor"/>
                        <path d="M137.5,62.14l35.69-22.53v-.53l-35.69-22.52V0l50.59,33.02v12.65l-50.59,33.02v-16.56Z" fill="#b3b3b3"/>
                    </svg>
                    <span>Agents-X</span>
                </a>
            </div>
            
            <!-- Section navigation -->
            <nav class="side-nav">
                <h3>Sections</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="#introduction" class="active">Introduction</a></li>
                    <li><a href="#visual-reasoning">Visual Reasoning</a></li>
                    <li><a href="#examples">Examples</a></li>
                    <li><a href="#applications">Applications</a></li>
                    <li><a href="#future-work">Future Work</a></li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <a href="index.html" class="sidebar-link">Home</a>
                <a href="about.html" class="sidebar-link">About Us</a>
                <a href="blog.html" class="sidebar-link">Blog</a>
            </div>
        </aside>

        <!-- Main content area -->
        <div class="main-content">
            <main>
                <section class="hero" id="introduction">
                    <div class="container">
                        <div class="date-tag">
                            <span class="date">June 12, 2023</span>
                            <span class="tag">Release</span>
                        </div>
                        <h1>Python is a good visual primitive</h1>
                        <p class="subtitle">
                            Agents-X's visual models represent a significant breakthrough in visual perception
                            by reasoning with images in their chain of thought.
                        </p>
                        <div class="project-links">
                            <a href="https://github.com/Agents-X/python-visual-primitive" class="project-link github">
                                <i class="fab fa-github"></i> Code
                            </a>
                            <a href="https://huggingface.co/Agents-X/python-visual-model" class="project-link huggingface">
                                <i class="fas fa-rocket"></i> Model
                            </a>
                            <a href="https://arxiv.org/abs/2306.12345" class="project-link arxiv">
                                <i class="fas fa-file-alt"></i> Report
                            </a>
                        </div>
                    </div>
                </section>

                <section class="content">
                    <div class="container">
                        <div class="text-content">
                            <p>
                                This approach enables a new axis for test-time compute scaling that seamlessly
                                blends visual and textual reasoning, as reflected in their state-of-the-art
                                performance across multimodal benchmarks, marking a significant step toward
                                more natural, multimodal-capable AI systems.
                            </p>
                            
                            <h2 id="visual-reasoning">Visual Reasoning in Practice</h2>
                            <p>
                                Thinking with images allows you to interact with AI more easily. You can ask questions by taking
                                a photo without worrying about the positioning of objects—whether the text is upside down or 
                                there are multiple physics problems in one photo. Even if objects aren't obvious at first glance,
                                visual reasoning allows the model to zoom in to see more clearly.
                            </p>
                            
                            <p class="note">All examples were completed with Agents-X visual model.</p>
                            
                            <div class="feature-buttons" id="examples">
                                <button class="feature-button active" data-case="case1">Read Handwriting</button>
                                <button class="feature-button" data-case="case2">Solve Problems</button>
                                <button class="feature-button">Read Signs</button>
                                <button class="feature-button">Find Schedules</button>
                            </div>
                            
                            <div class="reasoning-process">
                                <div id="reasoning-container" class="reasoning-container">
                                    <div class="reasoning-loading">
                                        <div class="loading-spinner"></div>
                                        <p>Loading visual reasoning process...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <p id="applications">
                                Our latest visual reasoning models work in tandem with other tools like Python data analysis,
                                web search, and image generation to creatively and effectively solve various tasks,
                                from educational questions to complex scientific challenges.
                            </p>
                            
                            <div class="feature-buttons">
                                <button class="feature-button">Solve Mazes</button>
                                <button class="feature-button">Find Event Dates</button>
                                <button class="feature-button">Get Location Info</button>
                                <button class="feature-button">Solve Puzzles</button>
                            </div>
                            
                            <div class="demo-image">
                                <img src="https://via.placeholder.com/800x500" alt="Maze demo">
                                <div class="demo-caption">
                                    <p>Solving this maze and plotting a path with red-colored line</p>
                                </div>
                            </div>
                            
                            <h2 id="future-work">Future Work</h2>
                            <p>
                                We are continuing to enhance our visual models with improved reasoning capabilities and
                                broader domain knowledge. Future versions will demonstrate even more sophisticated
                                understanding of complex visual inputs and better integration with programming tools.
                            </p>
                        </div>
                        
                        <aside class="sidebar">
                            <div class="sidebar-links">
                                <h3>Related Articles</h3>
                                <ul>
                                    <li><a href="#">The Future of Multimodal AI</a></li>
                                    <li><a href="#">How Visual Models Learn</a></li>
                                    <li><a href="#">AI and Artistic Creation</a></li>
                                    <li><a href="#">Visual AI in Education</a></li>
                                </ul>
                            </div>
                        </aside>
                    </div>
                </section>
            </main>

            <footer>
                <div class="container">
                    <div class="footer-row">
                        <div class="copyright">
                            <p>&copy; 2023 Agents-X. All rights reserved.</p>
                        </div>
                        <div class="footer-social">
                            <a href="https://github.com/Agents-X" class="social-icon" aria-label="GitHub">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="#" class="social-icon" aria-label="小红书">
                                <i class="fab fa-weibo"></i>
                            </a>
                            <a href="#" class="social-icon" aria-label="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="about.html#contact" class="social-icon" aria-label="Contact">
                                <i class="fas fa-envelope"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with the default case
            loadTrajectoryCase('case1');
            
            // Set up event listeners for feature buttons
            const featureButtons = document.querySelectorAll('.feature-button[data-case]');
            featureButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    featureButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    // Load the trajectory case
                    loadTrajectoryCase(this.getAttribute('data-case'));
                });
            });
        });

        async function loadTrajectoryCase(caseId) {
            const container = document.getElementById('reasoning-container');
            container.innerHTML = `
                <div class="reasoning-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading visual reasoning process...</p>
                </div>
            `;
            
            try {
                // First, load the case metadata
                const casesResponse = await fetch('assets/trajectory_cases.json');
                
                if (!casesResponse.ok) {
                    throw new Error(`Failed to load cases data: ${casesResponse.status}`);
                }
                
                const casesData = await casesResponse.json();
                
                if (!casesData[caseId]) {
                    throw new Error(`Case ${caseId} not found in trajectory data`);
                }
                
                // Then load the trajectory data
                const trajectoryPath = casesData[caseId].traj_path;
                const trajectoryResponse = await fetch(trajectoryPath);
                
                if (!trajectoryResponse.ok) {
                    throw new Error(`Failed to load trajectory at ${trajectoryPath}: ${trajectoryResponse.status}`);
                }
                
                const trajectoryData = await trajectoryResponse.json();
                
                // Render the trajectory
                renderTrajectory(trajectoryData, container);
            } catch (error) {
                console.error('Error loading trajectory:', error);
                container.innerHTML = `
                    <div class="reasoning-error">
                        <div class="error-icon">⚠️</div>
                        <p>Error loading the reasoning process: ${error.message}</p>
                        <p>Please check the browser console for more details.</p>
                    </div>
                `;
            }
        }

        function renderTrajectory(trajectoryData, container) {
            container.innerHTML = '';
            
            trajectoryData.forEach((message, index) => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `reasoning-message reasoning-${message.role}`;
                
                // Process message content
                if (message.content) {
                    // Check if this is the first user message with question 
                    if (message.role === 'user' && index === 0) {
                        // Extract the user question more explicitly
                        const userQuestion = message.content.find(c => 
                            c.type === 'text' && c.text.includes('*user question:*')
                        );
                        
                        if (userQuestion) {
                            const questionDiv = document.createElement('div');
                            questionDiv.className = 'user-question';
                            
                            // Extract just the user question part
                            const questionText = userQuestion.text;
                            const questionMatch = questionText.match(/\*user question:\*([\s\S]*?)(?:$|Remember to place the final)/);
                            
                            if (questionMatch && questionMatch[1]) {
                                questionDiv.innerHTML = `<strong>Question:</strong> ${questionMatch[1].trim()}`;
                                messageDiv.appendChild(questionDiv);
                            }
                        }
                    }
                    
                    message.content.forEach(content => {
                        if (content.type === 'text') {
                            // Check if this is a code block
                            if (content.text.includes('<code>')) {
                                const codeRegex = /<code>\n```python\n([\s\S]*?)\n```\n<\/code>/g;
                                let match;
                                let lastIndex = 0;
                                
                                while ((match = codeRegex.exec(content.text)) !== null) {
                                    // Add text before the code block
                                    const beforeText = content.text.substring(lastIndex, match.index);
                                    if (beforeText.trim()) {
                                        const textDiv = document.createElement('div');
                                        textDiv.className = 'reasoning-text';
                                        textDiv.textContent = beforeText.trim();
                                        messageDiv.appendChild(textDiv);
                                    }
                                    
                                    // Add the code block
                                    const codeDiv = document.createElement('div');
                                    codeDiv.className = 'reasoning-code';
                                    const pre = document.createElement('pre');
                                    const code = document.createElement('code');
                                    code.className = 'language-python';
                                    code.textContent = match[1];
                                    pre.appendChild(code);
                                    codeDiv.appendChild(pre);
                                    messageDiv.appendChild(codeDiv);
                                    
                                    lastIndex = match.index + match[0].length;
                                }
                                
                                // Add remaining text after the last code block
                                const afterText = content.text.substring(lastIndex);
                                if (afterText.trim()) {
                                    const textDiv = document.createElement('div');
                                    textDiv.className = 'reasoning-text';
                                    textDiv.textContent = afterText.trim();
                                    messageDiv.appendChild(textDiv);
                                }
                            }
                            // Check if this is interpreter output
                            else if (content.text.includes('<interpreter>')) {
                                const interpreterRegex = /<interpreter>([\s\S]*?)<\/interpreter>/g;
                                let match;
                                let lastIndex = 0;
                                
                                while ((match = interpreterRegex.exec(content.text)) !== null) {
                                    // Add text before the interpreter output
                                    const beforeText = content.text.substring(lastIndex, match.index);
                                    if (beforeText.trim()) {
                                        const textDiv = document.createElement('div');
                                        textDiv.className = 'reasoning-text';
                                        textDiv.textContent = beforeText.trim();
                                        messageDiv.appendChild(textDiv);
                                    }
                                    
                                    // Add the interpreter output
                                    const outputDiv = document.createElement('div');
                                    outputDiv.className = 'reasoning-interpreter-output';
                                    outputDiv.textContent = match[1];
                                    messageDiv.appendChild(outputDiv);
                                    
                                    lastIndex = match.index + match[0].length;
                                }
                                
                                // Add remaining text after the last interpreter output
                                const afterText = content.text.substring(lastIndex);
                                if (afterText.trim()) {
                                    const textDiv = document.createElement('div');
                                    textDiv.className = 'reasoning-text';
                                    textDiv.textContent = afterText.trim();
                                    messageDiv.appendChild(textDiv);
                                }
                            }
                            // Check if this is a final answer
                            else if (content.text.includes('<answer>')) {
                                const answerRegex = /<answer>\n\\boxed{([\s\S]*?)}\n<\/answer>/g;
                                let match;
                                
                                if ((match = answerRegex.exec(content.text)) !== null) {
                                    const answerDiv = document.createElement('div');
                                    answerDiv.className = 'reasoning-answer';
                                    answerDiv.innerHTML = `<div class="answer-box">Final Answer: ${match[1]}</div>`;
                                    messageDiv.appendChild(answerDiv);
                                }
                                
                                // Add any text outside the answer box
                                const textParts = content.text.replace(answerRegex, '').trim();
                                if (textParts) {
                                    const textDiv = document.createElement('div');
                                    textDiv.className = 'reasoning-text';
                                    textDiv.textContent = textParts;
                                    messageDiv.appendChild(textDiv);
                                }
                            }
                            // Regular text
                            else {
                                const textDiv = document.createElement('div');
                                textDiv.className = 'reasoning-text';
                                
                                // Check if this is user question
                                if (message.role === 'user') {
                                    // Extract actual question from the user message
                                    // Look for either user question tag or just display all content
                                    if (content.text.includes('*user question:*')) {
                                        const questionParts = content.text.split('*user question:*');
                                        const question = questionParts[1] ? questionParts[1].trim() : content.text;
                                        textDiv.innerHTML = `<strong>Question:</strong> ${question}`;
                                    } else if (content.text.includes('<image_clue_')) {
                                        // Skip image clue markers as we'll show the actual images
                                        if (!content.text.trim().match(/^<image_clue_\d+>$/) && 
                                            !content.text.trim().match(/^<\/image_clue_\d+>$/)) {
                                            // Also strip any image clue tags from the text
                                            const cleanText = content.text
                                                .replace(/<image_clue_\d+>/g, '')
                                                .replace(/<\/image_clue_\d+>/g, '')
                                                .trim();
                                            
                                            if (cleanText) {
                                                textDiv.textContent = cleanText;
                                                messageDiv.appendChild(textDiv);
                                            }
                                        }
                                    } else {
                                        textDiv.textContent = content.text;
                                        messageDiv.appendChild(textDiv);
                                    }
                                } else {
                                    textDiv.textContent = content.text;
                                    messageDiv.appendChild(textDiv);
                                }
                            }
                        }
                        // Handle image content
                        else if (content.type === 'image_url' && content.image_url) {
                            const imageWrap = document.createElement('div');
                            imageWrap.className = 'reasoning-image-wrap';
                            
                            const img = document.createElement('img');
                            // Handle both full URL and data URL formats
                            img.src = content.image_url.url;
                            img.className = 'reasoning-image';
                            img.alt = 'Visual reasoning image';
                            
                            // Add loading handling
                            img.onerror = function() {
                                this.onerror = null;
                                this.src = 'https://via.placeholder.com/600x400?text=Image+Load+Failed';
                            };
                            
                            // Add click to enlarge
                            img.onclick = function() {
                                if (this.classList.contains('enlarged')) {
                                    this.classList.remove('enlarged');
                                } else {
                                    this.classList.add('enlarged');
                                }
                            };
                            
                            imageWrap.appendChild(img);
                            messageDiv.appendChild(imageWrap);
                        }
                    });
                }
                
                container.appendChild(messageDiv);
            });
            
            // Highlight code blocks
            if (window.hljs) {
                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightBlock(block);
                });
            }
        }
    </script>

    <style>
        /* Reasoning process styling */
        .reasoning-process {
            margin: 30px 0;
            border: 1px solid #e6e6e6;
            border-radius: 8px;
            background: #fcfcfc;
            overflow: hidden;
        }
        
        .reasoning-container {
            max-height: 600px;
            overflow-y: auto;
            padding: 16px;
        }
        
        .reasoning-loading {
            padding: 30px;
            text-align: center;
            color: #888;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .reasoning-error {
            padding: 20px;
            text-align: center;
            color: #d32f2f;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .error-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .reasoning-message {
            margin-bottom: 16px;
            padding: 12px;
            border-radius: 6px;
        }
        
        .reasoning-user {
            background-color: #f1f5f9;
        }
        
        .reasoning-user strong {
            display: block;
            margin-bottom: 10px;
            color: #1d75a5;
            font-size: 1.1em;
        }
        
        .reasoning-assistant {
            background-color: #ffffff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        
        .reasoning-text {
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .reasoning-code {
            margin: 12px 0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .reasoning-code pre {
            margin: 0;
            padding: 12px;
            background-color: #2b2b2b;
            color: #f8f8f2;
            overflow-x: auto;
        }
        
        .reasoning-interpreter-output {
            margin: 12px 0;
            padding: 12px;
            background-color: #f7f7f9;
            border-left: 4px solid #8a8a8a;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .reasoning-image-wrap {
            margin: 12px 0;
            text-align: center;
        }
        
        .reasoning-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reasoning-image.enlarged {
            max-height: none;
            max-width: 90%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 10;
            position: relative;
        }
        
        .reasoning-answer {
            margin-top: 16px;
        }
        
        .answer-box {
            padding: 12px 16px;
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            border-radius: 6px;
            color: #388e3c;
            font-weight: 600;
        }
        
        .feature-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .user-question {
            background-color: #e8f5fe;
            border-left: 4px solid #1d75a5;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .user-question strong {
            display: block;
            color: #1d75a5;
            margin-bottom: 8px;
            font-size: 1.05em;
        }
    </style>
    
    <!-- Add highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</body>
</html> 